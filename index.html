<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Rock Paper Scissor</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header class="text-center">
      <div class="row">
        <div class="col-md-12">
          <div>ROCK PAPER SCISSOR BATTLE</div>
          <div class="finalContent"></div>
        </div>
      </div>
    </header>
    <div class="main text-center">
      <div class="container-fluid" id="mainContainer">
        <div class="row">
          <div class="col-md-5">
            <div class="d-flex flex-column">
              Player
              <div class="p-2"><img src="assets/rock.png" id="rock" /></div>
              <div class="p-2"><img src="assets/paper.png" id="paper" /></div>
              <div class="p-2">
                <img src="assets/scissor.png" id="scissor" />
              </div>
            </div>
          </div>
          <div class="col-md-2" id="score"></div>
          <div class="col-md-5">
            <div class="d-flex flex-column">
              Computer
              <div class="p-2"><img src="assets/rock.png" /></div>
              <div class="p-2"><img src="assets/paper.png" /></div>
              <div class="p-2"><img src="assets/scissor.png" /></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function computerPlay() {
        let x = Math.random();
        if (x < 0.33) return "rock";
        else if (x < 0.67 && x >= 0.33) return "paper";
        else return "scissor";
      }

      function playRound(playerSelection, computerSelection) {
        if (playerSelection == computerSelection) {
          console.log("It's a draw");
          return 2;
        } else if (playerSelection == "rock" && computerSelection == "paper") {
          console.log("You lost paper got rock");
          return 1;
        } else if (
          playerSelection == "scissor" &&
          computerSelection == "rock"
        ) {
          console.log("You lost scissor got wrecked by rock");
          return 1;
        } else if (
          playerSelection == "paper" &&
          computerSelection == "scissor"
        ) {
          console.log("You lost scissor made origami out of you");
          return 1;
        } else {
          console.log(
            "You won! " + playerSelection + " trashed " + computerSelection
          );
          return 0;
        }
      }

      let computerWin = 0,
        playerWin = 0;

      function game(playerSelection, computerSelection) {
        let whoWon = playRound(playerSelection, computerSelection);
        if (whoWon == 2) {
        } else if (whoWon == 1) {
          computerWin++;
        } else {
          playerWin++;
        }

        score = document.querySelector("#score");
        score.textContent =
          "Player " + playerWin + "  " + computerWin + " Computer";
        if (computerWin == 5) {
          var clearAll = document.querySelector(".main");
          var mainContainer = document.querySelector("#mainContainer");
          clearAll.removeChild(mainContainer);
          var finalScore = document.querySelector(".finalContent");
          finalScore.textContent = "GAME OVER YOU LOST!";
          finalScore.style.cssText = "color: red";
        }
        if (playerWin == 5) {
          var clearAll = document.querySelector(".main");
          var mainContainer = document.querySelector("#mainContainer");
          clearAll.removeChild(mainContainer);
          var finalScore = document.querySelector(".finalContent");
          finalScore.textContent = "YOU WON !";
          finalScore.style.cssText = "color: green";
        }
      }

      let playerSelection, computerSelection;
      rock = document.querySelector("#rock");
      rock.addEventListener("click", () => {
        playerSelection = "rock";
        computerSelection = computerPlay();
        console.log(game(playerSelection, computerSelection));
      });
      paper = document.querySelector("#paper");
      paper.addEventListener("click", () => {
        playerSelection = "paper";
        computerSelection = computerPlay();
        console.log(game(playerSelection, computerSelection));
      });
      scissor = document.querySelector("#scissor");
      scissor.addEventListener("click", () => {
        playerSelection = "scissor";
        computerSelection = computerPlay();
        console.log(game(playerSelection, computerSelection));
      });
      console.log(playerSelection + " vs " + computerSelection);
    </script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
